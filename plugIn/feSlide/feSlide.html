<!doctype html>
<!--
	feSlide
	Version: 1.6
-->
<html lang="ko">
<head>
	<meta charset="utf-8">
	<title>feSlide</title>
	<style>
		/* feSlide common */
		.feSlMask {
			overflow: auto;
			position: relative;
		}
		.feSlWrap {
			overflow: hidden;
			position: absolute;
			left: 0;
			top: 0;
		}
		.feSlItem {
			float: left;
			width: 400px;
			height: 200px;
			background-color: #fff;
		}
		.feSlNavi, .feSlNavi .btnStop, 
		.feSlPaging {display: none;}
		.feSlNavi button:hover {cursor: pointer;}
	</style>
	<style>
		/* feSlide custom */
		.myClass1 .feSlItem {
			width: 300px;
			height: 150px;
		}
	</style>
	<script src="http://code.jquery.com/jquery.min.js"></script>
	<script src="http://code.codeisart.co.kr/jquery.easing.min.js"></script>
	<script src="jquery.touchSwipe.min.js"></script>
	<script>
		;(function($, window, document, undefined) {
			/* feSlide */
			$.fn.feSlide = function(options) {
				// feSlide default options
				var _defaults = {
					vertical: false, // Vertical slide(true|false)
					naviBtn: true, // Navigation visibility(true|false)
					disableNavi: false, // Disable prev, next button(true|false)
					pagingBtn: true, // Pagination visibility(true|false)
					circular: true, // Circular scroll style(true|false)
					swipeEvent: false, // Swipe event in devie(true|false)
					fixedLayout: true, // Fixed layout(true|false)
					autoPlay: false, // Auto slide(true|false)
					aniSpeed: 1000, // Slide speed(Number:Integers)
					playSpeed: 5000, // Auto play speed(Number:Integers)
					visibleItem: 1, // Number of visible elements(Number:Integers)
					scrollItem: 1, // Scrolling step(Number:Integers)
					easing: "swing", // jQuery easing effect
					currentClass: "current", // Current class(String)
					itemIdPrefix: 'feSlItem', // Prefix text for bookmark(String)
					pagingTxt: 'Slide', // Pagination anchor text(String)
					prevBtnTxt: 'Prev', // Prev button text(String)
					autoBtnTxt: 'Auto', // Auto button text(String)
					stopBtnTxt: 'Stop', // Stop button text(String)
					nextBtnTxt: 'Next' // Next button text(String)
				},
				// Marge default options with new settings
				_options = $.extend({}, _defaults, options);
				return this.each(function() {
					var $this = ( $(this).has('.feSlMask').size() !== 0 ) // Create wrapper
							? $(this).addClass('feSlide')
							: $(this).addClass('feSlide')
							.wrapInner('<div class="feSlMask">'
								+ '<div class="feSlWrap"></div></div>'),
						// Item(creat li elements for pagination)
						$feSlItem = $this.find('.feSlItem').each(function(idx) {
							$(this)
								.after('<li><a href="#' 
									+ _options.itemIdPrefix + (idx + 1) + '">' 
									+ _options.pagingTxt + (idx + 1) + '</a></li>')
								.attr({ // Tabindex for keyboard focus
									id: _options.itemIdPrefix + (idx + 1)
								});
						}),
						itemSize = $feSlItem.size(), // Item length
						itemWidth = $feSlItem.outerWidth(true), // Item width
						itemHeight = $feSlItem.outerHeight(true), // Item height
						// Navigation html code
						naviHTML = '<div class="feSlNavi">'
							+	'<button class="btnPrev">' + _options.prevBtnTxt + '</button>'
							+	'<button class="btnAuto">' + _options.autoBtnTxt + '</button>'
							+	'<button class="btnStop">' + _options.stopBtnTxt + '</button>'
							+	'<button class="btnNext">' + _options.nextBtnTxt + '</button>'
							+ '</div>',
						// Mask - viewpoint(set pagination and navigation)
						$feSlMask = $this.find('.feSlMask')
							.find($feSlItem).next('li')
								.wrapAll('<ul class="feSlPaging"></ul>').end().end()
							.after(naviHTML).css('overflow', 'hidden'),
						// Wrapper
						$feSlWrap = $this.find('.feSlWrap'),
						// Pagination
						$feSlPaging = $this.find('.feSlPaging').prependTo($this),
						$feSlPagingList = $feSlPaging.find('> li'),
						$feSlPagingAnchor = $feSlPagingList.find('> a'),
						// Navigation
						$feSlNavi = $this.find('.feSlNavi'),
						$feSlNaviBtn = $feSlNavi.find('button'),
						// Etc
						currentIdx = 1,
						circularDir = 'next',
						playState, playTimer, dirPosX, dirPosY,
						// Slide
						feSlMethod = {
							// Initial
							init: function() {
								// Layout
								// Responsive layout
								if ( !_options.fixedLayout ) {
									// Reset option value
									_options.circular = true,
									_options.visibleItem = 1;
									// Reset position
									$feSlItem.not(':nth-child(' + currentIdx + ')')
										.css('position', 'absolute');
									$feSlWrap.css('position', 'relative');
									// Window resize event
									$(window).on('resize', function() {
										itemWidth = $feSlItem.outerWidth(true),
										itemHeight = $feSlItem.outerHeight(true);
										( itemHeight !== 0 )
											? $feSlWrap.css('height', itemHeight)
											: $feSlWrap.css('height', 'auto');
									}).trigger('resize');
								// Fixed layout
								} else {
									// Set Wrap, Mask width/height for direction
									// Vertical
									if ( _options.vertical ) {
										$feSlWrap.css({
											width: itemWidth,
											height: itemHeight * itemSize
										});
										$feSlMask.css({
											width: itemWidth,
											height: itemHeight * _options.visibleItem
										});
									// Horizontal
									} else {
										$feSlWrap.css({
											width: itemWidth * itemSize,
											height: itemHeight
										});
										$feSlMask.css({
											width: itemWidth * _options.visibleItem,
											height: itemHeight
										});
									};
								};
								feSlMethod.setCurrent(); // Current item
								feSlMethod.naviEvent(); // Navigation
								feSlMethod.pagiEvent(); // Pagination
								if ( _options.autoPlay ) playMethod.autoPlay(); // Auto slide
							},
							// Navigation
							naviEvent: function() {
								// Visibility
								if ( _options.naviBtn ) $feSlNavi.show();
								if ( itemSize === 1 ) return false;
								// Reset option value
								if ( _options.visibleItem !== 1 ) _options.circular = false;
								// Hide others
								$feSlItem
									.not($feSlItem.filter('.' + _options.currentClass))
										.css('visibility', 'hidden');
								// Auto, Stop button events
								$feSlNaviBtn.filter('.btnAuto, .btnStop')
									.on('click', function(e) {
										e.preventDefault();
										circularDir = 'next', playState = 'play';
										$(this).blur().hide(); // blur() for IE toggle problem
										// Reset disable button
										$feSlNaviBtn
											.removeClass('disableBtn').removeAttr('disabled');
										// Toggle event
										if ( e.keyCode !== 9 && $(this).hasClass('btnAuto') ) {
											playMethod.autoPlay();
											$feSlNaviBtn.filter('.btnStop').focus();
										} else if ( e.keyCode !== 9 
											&& $(this).hasClass('btnStop') ) {
											playMethod.stopPlay();
											$feSlNaviBtn.filter('.btnAuto').focus();
										};
									}).end()
								// Prev, Next button events
								.filter('.btnPrev, .btnNext')
									.on('click', function(e) {
										e.preventDefault();
										// Check item height and animated el
										if ( itemHeight === 0 ) $(window).trigger('resize');
										if ( $feSlItem.is(':animated') 
											|| $feSlWrap.is(':animated') ) return false;
										// Set circularDir
										( _options.circular && $(this).hasClass('btnNext') ) 
											? circularDir = 'next' : circularDir = 'prev';
										// Set currentIdx
										if ( currentIdx === 1 && $(this).hasClass('btnPrev') ) {
											currentIdx = itemSize; // Prev event on first item 
										} else if ( currentIdx === itemSize 
											&& $(this).hasClass('btnNext') ) {
											currentIdx = 1; // Next event on last item
										} else if ( $(this).hasClass('btnPrev') 
											&&  currentIdx - _options.scrollItem < 1 ) {
											currentIdx = 1;
										} else if ( $(this).hasClass('btnNext') 
											&& currentIdx + _options.scrollItem > itemSize ) {
											currentIdx = itemSize;
										} else {
											( $(this).hasClass('btnNext') ) 
												? currentIdx += _options.scrollItem
												: currentIdx -= _options.scrollItem;
										};
										// Call animate slide, stop play
										feSlMethod.slideAnimate();
										playMethod.stopPlay();
									});
								// Swipe(plugin)
								if ( _options.swipeEvent ) {
									var swDirectionBtn;
									$feSlItem.swipe({
										allowPageScroll: 'vertical',
										excludedElements: '',
										swipe: function(swEvent, swDirection) {
											if ( swDirection === 'left' ) {
												swDirectionBtn = 'btnNext';
											} else if ( swDirection === 'right' ) {
												swDirectionBtn = 'btnPrev';
											};
											$feSlNaviBtn
												.filter('.' + swDirectionBtn).trigger('click');
										}
									});
								};
							},
							// Pagination
							pagiEvent: function() {
								// Visible
								if ( _options.visibleItem !== 1 ) return false;
								if ( _options.pagingBtn ) $feSlPaging.show();
								// Pagination anchors event
								$feSlPagingAnchor.on('click', function(e) {
									var $currentList = $feSlPagingList
											.filter('.' + _options.currentClass),
										currentListIdx = $feSlPagingList.index($currentList) + 1;
									currentIdx = $feSlPagingAnchor.index($(this)) + 1;
									e.preventDefault();
									// Check item height, animated el and current el
									if ( itemHeight === 0 ) $(window).trigger('resize');
									if ( $feSlItem.is(':animated') 
										|| $feSlWrap.is(':animated') 
										|| $(this).parent().is('.' + _options.currentClass) ) 
										return false;
									// Set circularDir
									if ( _options.circular ) {
										( currentListIdx > currentIdx )
											? circularDir = 'prev' : circularDir = 'next';
									};
									// Call animate slide, stop play
									feSlMethod.slideAnimate();
									playMethod.stopPlay();
								});
							},
							// Animate
							slideAnimate: function() {
								// Hide slide items(disable keyboard focus)
								function hideItem() {
									$feSlItem
										.not($feSlItem.filter('.' + _options.currentClass))
											.css('visibility', 'hidden');
								};
								// Default animate
								if ( !_options.circular ) {
									$feSlItem.css('visibility', 'visible'); // Visibility
									// Vertical option
									( _options.vertical )
										? $feSlWrap.stop().animate({
											top: - (itemHeight * (currentIdx - 1))
										}, _options.aniSpeed, _options.easing, hideItem)
										: $feSlWrap.stop().animate({
											left: - (itemWidth * (currentIdx - 1))
										}, _options.aniSpeed, _options.easing, hideItem);
								// Circular animate
								} else {
									// Set dirPosX, dirPosY
									if ( circularDir === 'prev' ) {
										dirPosX = itemWidth, dirPosY = itemHeight;
									} else {
										dirPosX = - itemWidth, dirPosY = - itemHeight;
									};
									// Position reset for circular option
									$feSlItem.filter("." + _options.currentClass).css({
										position: "absolute",
										left: "0",
										top: "0"
									});
									// Vertical(animate currentClass, reset currentIdx position)
									( _options.vertical )
										? $feSlItem
											.filter('.' + _options.currentClass).stop()
												.animate({
													left: '0',
													top: dirPosY
												}, _options.aniSpeed, _options.easing).end()
											.filter(':nth-child(' + currentIdx + ')').css({
												position: 'absolute',
												left: '0',
												top: - dirPosY
											})
										: $feSlItem
											.filter('.' + _options.currentClass).stop()
												.animate({
													left: dirPosX,
													top: '0'
												}, _options.aniSpeed, _options.easing).end()
											.filter(':nth-child(' + currentIdx + ')').css({
												position: 'absolute',
												left: - dirPosX,
												top: '0'
											});
									// Animate currentIdx
									$feSlItem.filter(':nth-child(' + currentIdx + ')')
										.css('visibility', 'visible').stop().animate({
											left: '0',
											top: '0'
										}, _options.aniSpeed, _options.easing, hideItem);
								};
								// Call current item setting
								feSlMethod.setCurrent();
							},
							// Current item
							setCurrent: function() {
								// Remove current class
								$this.find('.' + _options.currentClass)
									.removeClass(_options.currentClass);
								// Add current class
								$feSlItem.filter(':nth-child(' + currentIdx + ')')
									.add($feSlPagingList.filter(':nth-child(' + currentIdx + ')'))
									.addClass(_options.currentClass);
								// Call viewPointOp
								feSlMethod.viewPointOp();
							},
							// Viewpoint option
							viewPointOp: function() {
								if ( _options.visibleItem !== 1 ) {
									var i;
									for ( i = 1; i < _options.visibleItem; i++ ) {
										$feSlItem.filter('.' + _options.currentClass)
											.next($feSlItem).addClass(_options.currentClass);
									};
								};
								// Call hideNavi
								if ( _options.disableNavi ) feSlMethod.hideNavi();
							},
							// Hide prev, next button
							hideNavi: function() {
								var tgBtn;
								// Reset disable button
								$feSlNaviBtn
									.removeClass('disableBtn').removeAttr('disabled');
								// Set disable button
								if ( $feSlItem.eq(0).hasClass(_options.currentClass) ) {
									tgBtn = '.btnPrev';
									$feSlNaviBtn.filter('.btnNext').focus();
								} else if ( $feSlItem.eq(itemSize - 1)
									.hasClass(_options.currentClass) ) {
									tgBtn = '.btnNext';
									$feSlNaviBtn.filter('.btnPrev').focus();
								}
								$feSlNaviBtn.filter(tgBtn)
									.addClass('disableBtn').attr('disabled', 'disabled');
							}
						},
						// Auto play control
						playMethod = {
							autoPlay: function() {
								if ( itemSize === 1 ) return false;
								playMethod.playConfig(); // Call play config
								circularDir = 'next'; // Change circularDir
								// Toggle control buttons
								$feSlNaviBtn
									.filter('.btnAuto').hide().end()
									.filter('.btnStop').show();
							},
							playConfig: function() {
								// Set currentIdx
								if ( playState === undefined || currentIdx === itemSize ) {
									currentIdx = 1;
								} else if ( currentIdx + _options.scrollItem > itemSize ) {
									currentIdx = itemSize;
								} else {
									currentIdx += _options.scrollItem
								};
								// Call slide animate, setTimeout
								if ( playState !== undefined ) feSlMethod.slideAnimate();
								playState = 'play';
								playTimer = setTimeout(playMethod.playConfig, _options.playSpeed);
							},
							stopPlay: function() {
								clearTimeout(playTimer); // Clear timer
								playState = 'stop'; // Change playState
								// Toggle control buttons
								$feSlNaviBtn
									.filter('.btnStop').hide().end()
									.filter('.btnAuto').show();
							}
						};
					feSlMethod.init();
				});
			};
			/* //feSlide */
		})(jQuery, window, document);
	</script>
	<script>
		/* User script */
		$(function() {
			$('.myClass1').feSlide();
		});
	</script>
</head>
<body>
	<h1>feSlide</h1>
	<h2>.myClass1(default)</h2>
	<!-- myClass1 -->
	<div class="myClass1">
		<div class="feSlItem">
			1. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quasi, blanditiis, id amet ducimus laboriosam reprehenderit consequatur quod pariatur itaque beatae dolorem minima optio officiis ex rem nisi placeat soluta facilis!
		</div>
		<div class="feSlItem">
			<p>2. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsa, nemo!</p>
		</div>
		<div class="feSlItem">
			3. Lorem ipsum dolor.
			<ul>
				<li><a href="#">Lorem.</a></li>
				<li><a href="#">Lorem ipsum.</a></li>
				<li><a href="#">Lorem ipsum dolor sit amet.</a></li>
			</ul>
		</div>
	</div>
	<!-- //myClass1 -->
</body>
</html>